{"version":3,"file":"submit.js","sources":["../../../scripts/submit.js"],"sourcesContent":["// packages\nimport 'intersection-observer';\nimport yall from 'yall-js';\n\nconsole.log('submit page');\nif (sessionStorage.getItem(\"logger\")) {\n  document.getElementById('logger').value = sessionStorage.getItem(\"logger\");\n}\n\nif (sessionStorage.getItem(\"neighborhood\")) {\n  document.getElementById('neighborhood').value = sessionStorage.getItem(\"neighborhood\");\n}\n\nconst form = document.getElementById('form-submit');\nconst formToJSON = (elements) =>\n  [].reduce.call(\n    elements,\n    (data, element) => {\n      if (element.type === 'radio') {\n        if (element.checked) {\n          data[element.name] = element.value;\n        }\n      } else {\n        data[element.name] = element.value;\n      }\n      return data;\n    },\n    {}\n  );\n\nconst post = (formJSON) => {\n  fetch('https://bwb9uvadvf.execute-api.us-west-1.amazonaws.com/prod/people', {\n    method: 'POST',\n    body: JSON.stringify(formJSON),\n  }).then((response) => {\n    console.log(response);\n    location.reload();\n  });\n};\n\nconst submitForm = (e) => {\n  e.preventDefault();\n  e.stopPropagation();\n  e.stopImmediatePropagation();\n\n  let formJSON = formToJSON(form.elements);\n\n  const date = new Date();\n  const getMonth = (month) => {\n    if (month < 10) {\n      return `0${month}`;\n    } else {\n      return month;\n    }\n  };\n  const getFullDate = `${date.getFullYear()}-${getMonth(\n    date.getMonth() + 1\n  )}-${date.getDate()}`;\n\n  formJSON.date = getFullDate;\n  formJSON.time = date;\n\n  if(formJSON.logger.length > 0 && formJSON.logger !== sessionStorage.getItem(\"logger\")){\n    sessionStorage.setItem('logger', formJSON.logger);\n  }\n\n  if(formJSON.neighborhood.length > 0 && formJSON.neighborhood !== sessionStorage.getItem(\"neighborhood\")){\n    sessionStorage.setItem('neighborhood', formJSON.neighborhood);\n  }\n\n  console.log(formJSON)\n\n  // post(formJSON);\n};\n\nform.addEventListener('submit', submitForm);\n"],"names":["console","log","sessionStorage","getItem","document","getElementById","value","form","formToJSON","elements","reduce","call","data","element","type","checked","name","submitForm","e","preventDefault","stopPropagation","stopImmediatePropagation","formJSON","date","Date","getMonth","month","getFullDate","getFullYear","getDate","time","logger","length","setItem","neighborhood","addEventListener"],"mappings":";;AAAA;AAIAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;AACA,IAAIC,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAAJ,EAAsC;AACpCC,EAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,GAA0CJ,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAA1C;AACD;;AAED,IAAID,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAJ,EAA4C;AAC1CC,EAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,GAAgDJ,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAhD;AACD;;AAED,MAAMI,IAAI,GAAGH,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAb;;AACA,MAAMG,UAAU,GAAIC,QAAD,IACjB,GAAGC,MAAH,CAAUC,IAAV,CACEF,QADF,EAEE,CAACG,IAAD,EAAOC,OAAP,KAAmB;AACjB,MAAIA,OAAO,CAACC,IAAR,KAAiB,OAArB,EAA8B;AAC5B,QAAID,OAAO,CAACE,OAAZ,EAAqB;AACnBH,MAAAA,IAAI,CAACC,OAAO,CAACG,IAAT,CAAJ,GAAqBH,OAAO,CAACP,KAA7B;AACD;AACF,GAJD,MAIO;AACLM,IAAAA,IAAI,CAACC,OAAO,CAACG,IAAT,CAAJ,GAAqBH,OAAO,CAACP,KAA7B;AACD;;AACD,SAAOM,IAAP;AACD,CAXH,EAYE,EAZF,CADF;;AA0BA,MAAMK,UAAU,GAAIC,CAAD,IAAO;AACxBA,EAAAA,CAAC,CAACC,cAAF;AACAD,EAAAA,CAAC,CAACE,eAAF;AACAF,EAAAA,CAAC,CAACG,wBAAF;AAEA,MAAIC,QAAQ,GAAGd,UAAU,CAACD,IAAI,CAACE,QAAN,CAAzB;AAEA,QAAMc,IAAI,GAAG,IAAIC,IAAJ,EAAb;;AACA,QAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC1B,QAAIA,KAAK,GAAG,EAAZ,EAAgB;AACd,aAAQ,IAAGA,KAAM,EAAjB;AACD,KAFD,MAEO;AACL,aAAOA,KAAP;AACD;AACF,GAND;;AAOA,QAAMC,WAAW,GAAI,GAAEJ,IAAI,CAACK,WAAL,EAAmB,IAAGH,QAAQ,CACnDF,IAAI,CAACE,QAAL,KAAkB,CADiC,CAEnD,IAAGF,IAAI,CAACM,OAAL,EAAe,EAFpB;AAIAP,EAAAA,QAAQ,CAACC,IAAT,GAAgBI,WAAhB;AACAL,EAAAA,QAAQ,CAACQ,IAAT,GAAgBP,IAAhB;;AAEA,MAAGD,QAAQ,CAACS,MAAT,CAAgBC,MAAhB,GAAyB,CAAzB,IAA8BV,QAAQ,CAACS,MAAT,KAAoB7B,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAArD,EAAsF;AACpFD,IAAAA,cAAc,CAAC+B,OAAf,CAAuB,QAAvB,EAAiCX,QAAQ,CAACS,MAA1C;AACD;;AAED,MAAGT,QAAQ,CAACY,YAAT,CAAsBF,MAAtB,GAA+B,CAA/B,IAAoCV,QAAQ,CAACY,YAAT,KAA0BhC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAjE,EAAwG;AACtGD,IAAAA,cAAc,CAAC+B,OAAf,CAAuB,cAAvB,EAAuCX,QAAQ,CAACY,YAAhD;AACD;;AAEDlC,EAAAA,OAAO,CAACC,GAAR,CAAYqB,QAAZ,EA9BwB;AAiCzB,CAjCD;;AAmCAf,IAAI,CAAC4B,gBAAL,CAAsB,QAAtB,EAAgClB,UAAhC"}