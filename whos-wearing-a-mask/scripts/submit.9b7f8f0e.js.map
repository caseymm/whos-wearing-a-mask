{"version":3,"file":"submit.9b7f8f0e.js","sources":["../../../scripts/submit.js"],"sourcesContent":["// packages\nimport 'intersection-observer';\nimport yall from 'yall-js';\n\nconsole.log('submit page');\nconst form = document.getElementById('form-submit');\nconst formToJSON = (elements) =>\n  [].reduce.call(\n    elements,\n    (data, element) => {\n      if (element.type === 'radio') {\n        if (element.checked) {\n          data[element.name] = element.value;\n        }\n      } else {\n        data[element.name] = element.value;\n      }\n      return data;\n    },\n    {}\n  );\n\n// const options = {\n//   enableHighAccuracy: true,\n//   maximumAge: 2000,\n//   timeout: 10000,\n// };\n//\n// const getPosition = function (options) {\n//   return new Promise(function (resolve, reject) {\n//     navigator.geolocation.getCurrentPosition(resolve, reject, options);\n//   });\n// };\n\nconst post = (formJSON) => {\n  fetch('https://bwb9uvadvf.execute-api.us-west-1.amazonaws.com/prod/people', {\n    method: 'POST',\n    body: JSON.stringify(formJSON),\n  }).then((response) => {\n    console.log(response);\n    location.reload();\n  });\n};\n\nconst submitForm = (e) => {\n  e.preventDefault();\n  e.stopPropagation();\n  e.stopImmediatePropagation();\n\n  let formJSON = formToJSON(form.elements);\n\n  const date = new Date();\n  const getMonth = (month) => {\n    if (month < 10) {\n      return `0${month}`;\n    } else {\n      return month;\n    }\n  };\n  const getFullDate = `${date.getFullYear()}-${getMonth(\n    date.getMonth() + 1\n  )}-${date.getDate()}`;\n\n  formJSON.date = getFullDate;\n\n  post(formJSON);\n\n  // getPosition()\n  //   .then((position) => {\n  //     formJSON.lat = position.coords.latitude;\n  //     formJSON.lng = position.coords.longitude;\n  //     post(formJSON);\n  //   })\n  //   .catch((err) => {\n  //     console.error(err.message);\n  //     post(formJSON);\n  //   });\n};\n\nform.addEventListener('submit', submitForm);\n"],"names":["console","log","form","document","getElementById","addEventListener","e","preventDefault","stopPropagation","stopImmediatePropagation","formJSON","elements","reduce","call","data","element","type","checked","name","value","date","Date","getFullDate","getFullYear","month","getMonth","getDate","fetch","method","body","JSON","stringify","then","response","location","reload","post"],"mappings":"kDAIAA,QAAQC,IAAI,eACZ,MAAMC,EAAOC,SAASC,eAAe,eA0ErCF,EAAKG,iBAAiB,SAnCFC,IAClBA,EAAEC,iBACFD,EAAEE,kBACFF,EAAEG,+BAEEC,GA3CcC,EA2CQT,EAAKS,SA1C/B,GAAGC,OAAOC,KACRF,EACA,CAACG,EAAMC,KACgB,UAAjBA,EAAQC,KACND,EAAQE,UACVH,EAAKC,EAAQG,MAAQH,EAAQI,OAG/BL,EAAKC,EAAQG,MAAQH,EAAQI,MAExBL,GAET,KAbgBH,IAAAA,QA6CZS,EAAO,IAAIC,KAQXC,EAAe,GAAEF,EAAKG,iBAPVC,EAQhBJ,EAAKK,WAAa,EAPdD,EAAQ,GACF,IAAGA,EAEJA,KAKNJ,EAAKM,YATQF,IAAAA,EAWlBd,EAASU,KAAOE,EA7BJZ,CAAAA,IACZiB,MAAM,qEAAsE,CAC1EC,OAAQ,OACRC,KAAMC,KAAKC,UAAUrB,KACpBsB,KAAMC,IACPjC,QAAQC,IAAIgC,GACZC,SAASC,YAyBXC,CAAK1B"}